import qbs
import qbs.FileInfo
import qbs.Environment

Project {
    name: projectDisplayName + ' Setup'
    minimumQbsVersion: '@QBS_MIN_VER@'
    qbs.enableDebugCode: true
    qbsSearchPaths: [ 'tools/qbs' ]

    property string version: '@VERSION@'
    readonly property int versionMajor: parseInt(version.split('.')[0])
    readonly property int versionMinor: parseInt(version.split('.')[1])
    readonly property int versionPatch: parseInt(version.split('.')[2])
    readonly property string projectName: '@PROJECT_NAME@'
    readonly property string projectDisplayName: '@PROJECT_DISPLAY_NAME@'
    readonly property string variantSuffix: '@VARIANT_SUFFIX@'
    readonly property path qtdir: FileInfo.fromWindowsSeparators(Environment.getEnv('QTDIR'))
    readonly property path projectInstallRoot: {
        var path = sourceDirectory + '/@PROJECT_INSTALL_ROOT@';
        if (FileInfo.cleanPath) {
            path = FileInfo.cleanPath(path);
        }
        return path;
    }
    readonly property path workDirectory: FileInfo.joinPaths(projectInstallRoot, projectName);

    references: {
        if (qbs.buildVariant == 'debug' || variantSuffix == 'd') {
            return []
        }
        return [
            'setup/setup.qbs',
            'tools/tools.qbs'
        ]
    }
}
